I propose to use this procedure:

https://www.ansible.com/blog/testing-ansible-roles-with-docker

Please see the travis file in https://github.com/openearth-stack/postgresql/blob/master/.travis.yml as an example.

